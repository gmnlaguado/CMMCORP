#: import utilidades assets.utilidades
#: import Factory kivy.factory.Factory

<EmergentIdeaNegocio@Popup>:
    size_hint: None, None
    top: 800-232
    x: 357
    size: 566,336
    background:""
    background_color: (0,0,0, 0.8)
    separator_color: 0,0,0,0
    title: utilidades.Costantes.infoGeneral[11]
    title_size: 43
    font_name: "montserrat"
    title_align: "center"
    title_color: 1,1,1,1
    canvas.before:
        Color:
            rgba: (1,1,1,1)
        Rectangle:
            size: self.size
            pos: self.pos
    FloatLayout:
        size_hint: None, None
        size: 566,116
        LoginButton:
            focus: True
            x: 464
            top: 800 - 467
            text: "Continuar"
            on_release:
                app.caracterizacionBasica()
                root.dismiss()
                app.screenManager.current= app.ventanas[1]

<EmergentProServ@Popup>:
    size_hint: None, None
    top: 800-232
    x: 357
    size: 566,336
    background:""
    background_color: (0,0,0, 0.8)
    separator_color: 0,0,0,0
    title: "Ingrese los productos o servicios de su idea separada por comas"
    title_size: 43
    font_name: "montserrat"
    title_align: "center"
    title_color: 1,1,1,1
    canvas.before:
        Color:
            rgba: (1,1,1,1)
        Rectangle:
            size: self.size
            pos: self.pos
    FloatLayout:
        size_hint: None, None
        size: 566,116
        LoginInput:
            focus: True
            x: 464
            top: 800 - 467
            on_text_validate:
                app.screens[4].ids.labelMensajes.text = ""
                if utilidades.Comprobaciones.name(self.text):\
                app.screens[4].ids.productoServicio.background_color = 11/255,69/255,0/255,0.7;\
                app.screens[4].ids.listaProductos.text = self.text;\
                root.dismiss()

                if utilidades.Comprobaciones.name(self.text) == False:\
                app.screens[4].ids.labelMensajes.text = "Formato de lista invalido";\
                root.dismiss()


<EmergentColaboradores@Popup>:
    size_hint: None, None
    top: 800-232
    x: 357
    size: 566,336
    background:""
    background_color: (0,0,0, 0.8)
    separator_color: 0,0,0,0
    title: "Ingrese la lista de sus colaboradores separada por comas"
    title_size: 43
    font_name: "montserrat"
    title_align: "center"
    title_color: 1,1,1,1
    canvas.before:
        Color:
            rgba: (1,1,1,1)
        Rectangle:
            size: self.size
            pos: self.pos
    FloatLayout:
        size_hint: None, None
        size: 566,116
        LoginInput:
            focus: True
            x: 464
            top: 800 - 467
            on_text_validate:
                app.screens[4].ids.labelMensajes.text = ""
                if utilidades.Comprobaciones.name(self.text):\
                app.screens[4].ids.necesitaColaboradores.background_color = 11/255,69/255,0/255,0.7;\
                app.screens[4].ids.listaColaboradores.text = self.text;\
                root.dismiss()

                if utilidades.Comprobaciones.name(self.text) == False:\
                app.screens[4].ids.labelMensajes.text = "Formato de lista invalido";\
                root.dismiss()

<IdeaNegocio>:
    LoginLayout:
        size_hint: None, None
        size: 1150, 623
        top: 800-88
        x: 65
        Titulos:
            text: "Idea de Negocio"
            x: 192
            top: 800 - 24
        LoginLabel:
            x:88
            top:800-122
            text:"Emprendimiento"
        InfoInput:
            id: emprendimiento
            x:365
            top:800-122
            size: 451, 40
            focus: True
            on_text_validate:
                root.ids.labelMensajes.text = ""
                if utilidades.Comprobaciones.name(self.text):\
                app.cargarIdeaNegocio()

                if utilidades.Comprobaciones.name(self.text) == False:\
                root.ids.labelMensajes.text = "Nombre de emprendimiento Invalido"
        BoxLayout:
            orientation: "vertical"
            size_hint: None, None
            size: 352, 495
            top: 800-122
            x: 838
            spacing: 25
            InfoSpinner:
                id: sectorEmpresarial
                text: "Sector Empresarial"
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoSpinner:
                id: ciudades
                text: "Ciudad"
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoSpinner:
                id: estudios
                text: "Estudios sobre el tema"
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoSpinner:
                id: esAgropecuario
                text: utilidades.Costantes.ideaNegocio[0]
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoSpinner:
                id: necesitaColaboradores
                text: utilidades.Costantes.ideaNegocio[1]
                on_text:
                    root.ids.labelMensajes.text = ""
                    if self.text == "Si":\
                    root.ids.listaColaboradores.text = "";\
                    Factory.EmergentColaboradores().open()

                    if self.text == "No":\
                    self.background_color = 11/255,69/255,0/255,0.7;\
                    root.ids.listaColaboradores.text = self.text

            InfoSpinner:
                id: tiempoSemanal
                text: "Tiempo semanal a dedicar"
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoSpinner:
                id: porqueNo
                text: utilidades.Costantes.ideaNegocio[2]
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoSpinner:
                id: mesesQueLleva
                text: "Meses que lleva el negocio"
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
        BoxLayout:
            orientation: "vertical"
            size_hint: None, None
            size: 352, 170
            top: 800-187
            x: 88
            spacing: 25
            InfoSpinner:
                id:ciiu
                text: "CIIU"
                on_text:
                    root.ids.labelMensajes.text = utilidades.IdeaNegocio.cargarDatos()[13][utilidades.IdeaNegocio.cargarDatos()[12].index(self.text)][:40]
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoSpinner:
                id: comoSurge
                text: utilidades.Costantes.ideaNegocio[3]
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoSpinner:
                id: tieneExperiencia
                text: utilidades.Costantes.ideaNegocio[4]
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
        BoxLayout:
            orientation: "vertical"
            size_hint: None, None
            size: 352, 170
            top: 800-187
            x: 464
            spacing: 25
            InfoSpinner:
                id: departamentos
                text: "Departamento"
                on_text:
                    app.ciudadesIdeaNegocio(self.text)
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoSpinner:
                id: tiempoADedicar
                text: "Tiempo a dedicar"
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoSpinner:
                id: productoServicio
                text: "Producto / Servicio"
                on_text:
                    root.ids.labelMensajes.text = ""
                    Factory.EmergentProServ().open()
        LoginLabel:
            x:88
            top:800-382
            text:"INVERSIONES"
        InfoInput:
            id: portafolio
            x:318
            top:800-382
            size: 498, 40
            hint_text: "Portafolio"
            on_text_validate:
                root.ids.labelMensajes.text = ""
                if utilidades.Comprobaciones.name(self.text):\
                root.ids.inversionActivos.focus = True

                if utilidades.Comprobaciones.name(self.text) == False:\
                root.ids.labelMensajes.text = " Error en Formato de portafolio"
        BoxLayout:
            orientation: "vertical"
            size_hint: None, None
            size: 352, 170
            top: 800-447
            x: 88
            spacing: 25
            InfoInput:
                id: inversionActivos
                size: 352,40
                hint_text: utilidades.Costantes.ideaNegocio[5]
                on_text_validate:
                    root.ids.labelMensajes.text = ""
                    if utilidades.Comprobaciones.dinero(self.text):\
                    root.ids.ventasPrimerMes.focus = True

                    if utilidades.Comprobaciones.dinero(self.text) == False:\
                    root.ids.labelMensajes.text = "Formato Inv. Activos Invalido"

            InfoSpinner:
                id: porcentajeInversion
                text: utilidades.Costantes.ideaNegocio[6]
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7

            InfoInput:
                id: ventasPrimerMes
                size: 352,40
                hint_text: "Ventas primer mes"
                on_text_validate:
                    root.ids.labelMensajes.text = ""
                    if utilidades.Comprobaciones.dinero(self.text):\
                    root.ids.inversionInicial.focus = True

                    if utilidades.Comprobaciones.dinero(self.text) == False:\
                    root.ids.labelMensajes.text = "Error en Ventas Primer Mes"
        BoxLayout:
            orientation: "vertical"
            size_hint: None, None
            size: 352, 170
            top: 800-447
            x: 464
            spacing: 25
            InfoInput:
                id: inversionInicial
                size: 352,40
                hint_text: utilidades.Costantes.ideaNegocio[7]
                on_text_validate:
                    root.ids.labelMensajes.text = ""
                    if utilidades.Comprobaciones.dinero(self.text):\
                    root.ids.invCapitalTrabajo.focus = True

                    if utilidades.Comprobaciones.dinero(self.text) == False:\
                    root.ids.labelMensajes.text = "Error en Inv. Inicial"
            InfoInput:
                id: invCapitalTrabajo
                size: 352,40
                hint_text: "Inv. Capital de Trabajo"
                on_text_validate:
                    root.ids.labelMensajes.text = ""
                    if utilidades.Comprobaciones.dinero(self.text):\
                    root.ids.ventasPrimerAno.focus = True

                    if utilidades.Comprobaciones.dinero(self.text) == False:\
                    root.ids.labelMensajes.text = "Error en Inv. Capital Trabajo"

            InfoInput:
                id: ventasPrimerAno
                size: 352,40
                hint_text: utilidades.Costantes.ideaNegocio[8]
                on_text_validate:
                    root.ids.labelMensajes.text = ""
                    if utilidades.Comprobaciones.dinero(self.text):\
                    root.ids.imagine.focus = True

                    if utilidades.Comprobaciones.dinero(self.text) == False:\
                    root.ids.labelMensajes.text = f"Error en {utilidades.Costantes.ideaNegocio[8]}"

        LoginLabel:
            x:88
            top:800-642
            text:"Imagine su negocio"
        InfoInput:
            id: imagine
            x:410
            top:800-642
            size: 780, 40
            on_text_validate:
                root.ids.labelMensajes.text = ""
                if utilidades.Comprobaciones.name(self.text) == False:\
                root.ids.labelMensajes.text = f"Formato incorrecto"

        Titulos:
            id: labelMensajes
            text: ""
            color: 1,0,0,1
            size: 763, 38
            x: 75
            top: 800 - 737
            bold: False

        Titulos:
            id: listaProductos
            color: 0,0,0,0
            size: 763, 38
            x: 75
            top: 800 - 737
        Titulos:
            id: listaColaboradores
            color: 0,0,0,0
            size: 763, 38
            x: 75
            top: 800 - 737

        LoginButton:
            text: "Ingresar"
            top: 800-724
            x: 863
            on_release:
                root.ids.labelMensajes.text = ""
                if app.ideaNegocio():\
                Factory.EmergentIdeaNegocio().open()

                if app.ideaNegocio() == False:\
                root.ids.labelMensajes.text = "Formulario Incompleto"