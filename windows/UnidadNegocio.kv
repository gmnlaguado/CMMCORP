#: import Factory kivy.factory.Factory
#: import utilidades assets.utilidades

<EmergentUnidadNegocio@Popup>:
    size_hint: None, None
    top: 800-232
    x: 357
    size: 566,336
    background:""
    background_color: (0,0,0, 0.8)
    separator_color: 0,0,0,0
    title: utilidades.Costantes.infoGeneral[11]
    title_size: 43
    font_name: "montserrat"
    title_align: "center"
    title_color: 1,1,1,1
    canvas.before:
        Color:
            rgba: (1,1,1,1)
        Rectangle:
            size: self.size
            pos: self.pos
    FloatLayout:
        size_hint: None, None
        size: 566,116
        LoginButton:
            focus: True
            x: 464
            top: 800 - 467
            text: "Continuar"
            on_release:
                app.caracterizacionBasica()
                root.dismiss()
                app.screenManager.current= app.ventanas[1]

<UnidadNegocio>:
    LoginLayout:
        size_hint: None, None
        size: 1150, 623
        top: 800-88
        x: 65
        Titulos:
            text: "Unidad de Negocio"
            x: 192
            top: 800 - 24
        LoginLabel:
            x:88
            top:800-122
            text:"Unidad"
        InfoInput:
            id: unidad
            x:220
            top:800-122
            size: 596, 40
            focus: True
            on_text_validate:
                root.ids.labelMensajes.text = ""
                if utilidades.Comprobaciones.name(self.text):\
                app.cargarUnidadNegocio()

                if utilidades.Comprobaciones.name(self.text) == False:\
                root.ids.labelMensajes.text = "Nombre de Unidad Invalido"
        BoxLayout:
            orientation: "vertical"
            size_hint: None, None
            size: 352, 554
            top: 800-129
            x: 838
            spacing: 25
            InfoSpinner:
                id: existe
                text: "Si existe, seleccione"
                values: ["No"]
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoSpinner:
                id: cuantosSocios
                text: "Cantidad de socios"
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoSpinner:
                id: ciiu
                text: "CIIU"
                on_text:
                    root.ids.labelMensajes.text = utilidades.UnidadNegocio.cargarDatos()[8][utilidades.UnidadNegocio.cargarDatos()[7].index(self.text)][:40]
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoInput:
                size: 352,40
                hint_text: utilidades.Costantes.unidadNegocio[0]
            InfoInput:
                size: 352,40
                hint_text: utilidades.Costantes.unidadNegocio[1]
            InfoSpinner:
                id: sector
                text: "Sector Empresarial"
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoSpinner:
                id: regCamara
                text: utilidades.Costantes.unidadNegocio[2]
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoSpinner:
                id:conContrato
                text: "Colaborador con contrato"
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoSpinner:
                id:sinContrato
                text: "Colaborador sin contrato"
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7

        InfoSpinner:
            id: departamentos
            text: "Departamento"
            top: 800-187
            x: 88
            on_text:
                app.ciudadesUnidadNegocio(self.text)
                root.ids.labelMensajes.text = ""
                self.background_color = 11/255,69/255,0/255,0.7

        BoxLayout:
            orientation: "vertical"
            size_hint: None, None
            size: 352, 237
            top: 800-187
            x: 463
            spacing: 25
            InfoSpinner:
                id:ciudades
                text: "Ciudad"
                on_text:
                    root.ids.labelMensajes.text = ""
                    self.background_color = 11/255,69/255,0/255,0.7
            InfoInput:
                id: direccion
                size: 352,40
                hint_text: "___ # ___ - ___"
            InfoInput:
                id: telFijo
                size: 352,40
                hint_text: utilidades.Costantes.unidadNegocio[10]
                on_text_validate:
                    root.ids.labelMensajes.text = ""
                    if utilidades.Comprobaciones.fijo(self.text):\
                    root.ids.celular.focus = True
                    if utilidades.Comprobaciones.fijo(self.text) == False:\
                    root.ids.labelMensajes.text = "Formato Invalido"
            InfoInput:
                size: 352,40
                hint_text: utilidades.Costantes.unidadNegocio[4]
                on_text_validate:
                    root.ids.labelMensajes.text = ""
                    if utilidades.Comprobaciones.celular(self.text) == False:\
                    root.ids.labelMensajes.text = "Formato de Tel. Celular Invalido"


        LoginLabel:
            x:88
            top:800-251
            text: utilidades.Costantes.unidadNegocio[6]
        InfoSpinnerMini:
            id: rotulo
            x:246
            top:800-251
            size: 192,40
            text: utilidades.Costantes.unidadNegocio[3]
            on_text:
                root.ids.labelMensajes.text = ""
                self.background_color = 11/255,69/255,0/255,0.7
        LoginLabel:
            x:88
            top:800-319
            text:"Contacto"
        InfoSpinnerMini:
            id: indicador
            text: "Indicador"
            size: 192,40
            x:246
            top:800-319
            on_text:
                root.ids.labelMensajes.text = ""
                self.background_color = 11/255,69/255,0/255,0.7
        InfoInput:
            id: celular
            size: 352,40
            x:89
            top:800-384
            hint_text: utilidades.Costantes.unidadNegocio[4]
            on_text_validate:
                root.ids.labelMensajes.text = ""
                if utilidades.Comprobaciones.celular(self.text):\
                root.ids.descipcion.focus = True
                if utilidades.Comprobaciones.celular(self.text) == False:\
                root.ids.labelMensajes.text = "Formato de Tel. Celular Invalido"

        LoginLabel:
            x:88
            top:800-444
            text: utilidades.Costantes.unidadNegocio[7]
        InfoInput:
            id: descipcion
            x:291
            top:800-444
            size: 523,40
            on_text_validate:
                root.ids.labelMensajes.text = ""
                if utilidades.Comprobaciones.name(self.text):\
                root.ids.portafolio.focus = True
                if utilidades.Comprobaciones.name(self.text) == False:\
                root.ids.labelMensajes.text = "Formato Invalido"
        LoginLabel:
            x:88
            top:800-503
            text:"Portafolio"
        InfoInput:
            id: portafolio
            x:291
            top:800-503
            size: 523,40
            on_text_validate:
                root.ids.labelMensajes.text = ""
                if utilidades.Comprobaciones.name(self.text):\
                root.ids.creacion.focus = True
                if utilidades.Comprobaciones.name(self.text) == False:\
                root.ids.labelMensajes.text = "Formato de Portafolio Invalido"

        LoginLabel:
            x:88
            top:800-567
            text: utilidades.Costantes.unidadNegocio[8]
        InfoInput:
            id: creacion
            x:239
            top:800-567
            size: 248,40
            hint_text: "DD/MM/AAAA"
            on_text_validate:
                root.ids.labelMensajes.text = ""
                if utilidades.Comprobaciones.data(self.text):\
                root.ids.nit.focus = True
                if utilidades.Comprobaciones.data(self.text) == False:\
                root.ids.labelMensajes.text = "Formato de Fecha Invalido"
        LoginLabel:
            x:500
            top:800-567
            text:"NIT"
        InfoInput:
            id: nit
            x:567
            top:800-567
            size: 248,40
            on_text_validate:
                root.ids.labelMensajes.text = ""
                if utilidades.Comprobaciones.dinero(self.text):\
                root.ids.descipcionPasivos.focus = True
                if utilidades.Comprobaciones.dinero(self.text) == False:\
                root.ids.labelMensajes.text = "Formato de NIT Invalido"
        LoginLabel:
            x:88
            top:800-636
            text: utilidades.Costantes.unidadNegocio[9]
        InfoInput:
            id: descipcionPasivos
            x:415
            top:800-636
            size: 400,40
            on_text_validate:
                root.ids.labelMensajes.text = ""
                if utilidades.Comprobaciones.name(self.text) == False:\
                root.ids.labelMensajes.text = f"Error en la {utilidades.Costantes.unidadNegocio[9]}"

        Titulos:
            id: labelMensajes
            text: ""
            color: 1,0,0,1
            size: 763, 38
            x: 75
            top: 800 - 737
            bold: False
        LoginButton:
            text: "Ingresar"
            top: 800-724
            x: 863
            on_release:
                root.ids.labelMensajes.text = ""
                if app.unidadNegocio():\
                Factory.EmergentUnidadNegocio().open()

                if app.unidadNegocio() == False:\
                root.ids.labelMensajes.text = "Formulario Incompleto"
